framework:
    messenger:
        buses:
            messenger.bus.commands:
                middleware:
                    - 'App\Core\Infrastructure\MessageBus\CommandBus\Middleware\EventStoreTransactionMiddleware'

services:
    _defaults:
        public: false

    App\Core\Infrastructure\MessageBus\CommandBus\Middleware\EventStoreTransactionMiddleware:
        class: App\Core\Infrastructure\MessageBus\CommandBus\Middleware\EventStoreTransactionMiddleware
        arguments:
            - '@Prooph\EventStore\TransactionalEventStore'
